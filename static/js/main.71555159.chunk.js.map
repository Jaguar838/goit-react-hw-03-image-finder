{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.scss","UI/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.scss","components/Searchbar/Searchbar.module.scss","UI/Layout/Layout.style.js","UI/Layout/Layout.jsx","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","utils/apiService.js","UI/Spinner/Spinner.jsx","UI/Button/Button.style.js","UI/Button/Button.jsx","UI/Modal/Modal.jsx","components/ImageGallery/ImageGallery.jsx","components/App/App.jsx","index.js"],"names":["module","exports","Container","styled","div","Layout","children","INICIAL_STATE","query","Searchbar","state","handleChangeSearch","target","setState","value","handleSubmit","evt","preventDefault","console","log","onSubmit","props","trim","resetSearch","toast","error","this","className","css","SearchForm","type","SearchForm_button","SearchForm_button_label","SearchForm_input","placeholder","onChange","Component","ImageGalleryItem","webformatURL","tags","largeImageURL","onClickImg","src","alt","ImageGalleryItem_image","onClick","axios","defaults","baseURL","params","key","image_type","orientation","per_page","fetchImg","a","searchQuery","currentPage","get","q","page","data","hits","Spinner","color","size","Btn","button","Button","defaultProps","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onCloseModal","handleBackdropClick","currentTarget","window","addEventListener","removeEventListener","createPortal","s","backdrop","modal","ImageGallery","images","isLoading","showModal","fetchImages","options","then","prevState","catch","err","finally","toggleModal","handleModalImage","url","prevProps","scrollTo","top","documentElement","scrollHeight","behavior","showButton","length","Error","imageGallery","map","id","onToggleModal","App","handleSubmitSearchbar","modalImage","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.71555159.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2l45G\",\"ImageGalleryItem_image\":\"ImageGalleryItem_ImageGalleryItem_image__3hr02\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Modal_backdrop__3YLIJ\",\"modal\":\"Modal_modal__D5czE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1H2oO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3-De8\",\"SearchForm\":\"Searchbar_SearchForm__2YJag\",\"SearchForm_button\":\"Searchbar_SearchForm_button__19R4F\",\"SearchForm-button\":\"Searchbar_SearchForm-button__3B9kN\",\"SearchForm_button_label\":\"Searchbar_SearchForm_button_label__3Yjj4\",\"SearchForm_input\":\"Searchbar_SearchForm_input__nDekF\"};","import styled from 'styled-components';\r\n\r\nexport const Container = styled.div`\r\n  width: 1280px;\r\n  margin: 0 auto;\r\n  padding: 0 20px;\r\n\r\n  @media (max-width: 1283px) {\r\n    width: 940px;\r\n  }\r\n\r\n  @media (max-width: 992px) {\r\n    width: 700px;\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    width: 520px;\r\n  }\r\n\r\n  @media (max-width: 576px) {\r\n    width: 90%;\r\n  }\r\n`;\r\n","import { Container } from './Layout.style';\r\nimport React from 'react';\r\n\r\nconst Layout = ({ children }) => <Container>{children}</Container>;\r\n\r\nexport default Layout;\r\n","import React, { Component } from 'react';\n\nimport PropTypes from 'prop-types';\nimport css from './Searchbar.module.scss';\nimport toast from 'react-hot-toast';\n\nconst INICIAL_STATE = {\n    query: '',\n};\n\nexport class Searchbar extends Component {\n    static propTypes = {\n        onSubmit: PropTypes.func.isRequired,\n    };\n\n    state = INICIAL_STATE;\n\n    handleChangeSearch = ({ target }) => {\n        this.setState({ query: target.value });\n    };\n\n    handleSubmit = evt => {\n        evt.preventDefault();\n        const { query } = this.state;\n        console.log(query);\n        const { onSubmit } = this.props;\n        if (query.trim() === '') {\n            toast.error('Введите поисковый запрос');\n            return;\n        }\n        onSubmit(query);\n        this.resetSearch();\n    };\n\n    resetSearch = () => {\n        this.setState(INICIAL_STATE);\n    };\n\n    render() {\n        const { query } = this.state;\n        return (\n            <header className={css.Searchbar}>\n                <form onSubmit={this.handleSubmit} className={css.SearchForm}>\n                    <button type=\"submit\" className={css.SearchForm_button}>\n                        <span className={css.SearchForm_button_label}>\n                            Search\n                        </span>\n                    </button>\n                    <input\n                        className={css.SearchForm_input}\n                        type=\"text\"\n                        placeholder=\"Search images and photos\"\n                        onChange={this.handleChangeSearch}\n                        value={query}\n                    />\n                </form>\n            </header>\n        );\n    }\n}\n","import React from 'react';\r\nimport css from './ImageGalleryItem.module.scss';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst ImageGalleryItem = ({\r\n    webformatURL,\r\n    tags,\r\n    largeImageURL,\r\n    onClickImg,\r\n}) => {\r\n    return (\r\n        <li className={css.ImageGalleryItem}>\r\n            <img\r\n                src={webformatURL}\r\n                alt={tags}\r\n                className={css.ImageGalleryItem_image}\r\n                data-source={largeImageURL}\r\n                onClick={onClickImg}\r\n            />\r\n        </li>\r\n    );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n    webformatURL: PropTypes.string.isRequired,\r\n    tags: PropTypes.string.isRequired,\r\n    largeImageURL: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\naxios.defaults.params = {\n    key: '21828776-3a3234db6b008ce4834511463',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    per_page: 12,\n};\n\nexport const fetchImg = async ({ searchQuery = '', currentPage = 1 }) => {\n    const { data } = await axios.get('', {\n        params: {\n            q: searchQuery,\n            page: currentPage,\n        },\n    });\n    return data.hits;\n};\n","import Loader from 'react-loader-spinner';\r\n\r\nconst Spinner = () => <Loader color=\"#57ba41\" size=\"23\" type=\"Rings\" />;\r\n\r\nexport default Spinner;\r\n","import styled from 'styled-components';\r\n\r\nexport const Btn = styled.button`\r\n  cursor: pointer;\r\n  color: #7366ff;\r\n  font-weight: 500;\r\n  padding: 10px 15px;\r\n  border-radius: 5px;\r\n  background-color: rgba(115, 102, 255, 0.15);\r\n  transition: all 0.3s ease;\r\n\r\n  &:hover {\r\n    color: #fff;\r\n    background-color: #7366ff;\r\n  }\r\n`;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Btn } from './Button.style';\r\n\r\nconst Button = ({ children, onClick }) => (\r\n    <Btn onClick={onClick}>{children}</Btn>\r\n);\r\n\r\nButton.defaultProps = {\r\n    children: '',\r\n};\r\n\r\nButton.propTypes = {\r\n    children: PropTypes.node.isRequired,\r\n};\r\n\r\nexport default Button;\r\n","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from \"prop-types\";\r\nimport s from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nclass Modal extends Component {\r\n    componentDidMount() {\r\n        window.addEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    handleKeyDown = e => {\r\n        if (e.code === 'Escape') {\r\n            this.props.onCloseModal();\r\n        }\r\n    };\r\n\r\n    handleBackdropClick = e => {\r\n        if (e.target === e.currentTarget) {\r\n            this.props.onCloseModal();\r\n        }\r\n    };\r\n\r\n    render() {\r\n        return createPortal(\r\n            <div className={s.backdrop} onClick={this.handleBackdropClick}>\r\n                <div className={s.modal}>{this.props.children}</div>\r\n            </div>,\r\n            modalRoot,\r\n        );\r\n    }\r\n}\r\n\r\nModal.propTypes = {\r\n  onCloseModal: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Modal;\r\n","import React, { Component } from 'react';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport { fetchImg } from 'utils/apiService';\nimport { Spinner } from 'UI/Spinner';\nimport { Button } from 'UI/Button';\nimport { Modal } from 'UI/Modal';\n// import { toast } from 'react-toastify';\nimport css from './ImageGallery.module.scss';\n\n// import PropTypes from 'prop-types';\nexport class ImageGallery extends Component {\n    state = {\n        images: [],\n        currentPage: 1,\n        isLoading: false,\n        error: null,\n        showModal: false,\n        largeImageURL: null,\n        // status: 'idle',\n    };\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevProps.query !== this.props.query) {\n            this.setState({ currentPage: 1, images: [], error: null }, () =>\n                this.fetchImages(),\n            );\n        }\n\n        if (prevState.currentPage !== this.state.currentPage) {\n            window.scrollTo({\n                top: document.documentElement.scrollHeight,\n                behavior: 'smooth',\n            });\n        }\n    }\n\n    fetchImages = () => {\n        const { currentPage } = this.state;\n        const { query } = this.props;\n\n        const options = {\n            query,\n            currentPage,\n        };\n\n        this.setState({ isLoading: true });\n\n        fetchImg(options)\n            .then(images =>\n                this.setState(prevState => ({\n                    images: [...prevState.images, ...images],\n                    currentPage: prevState.currentPage + 1,\n                })),\n            )\n            .catch(err => this.setState({ err }))\n            .finally(() => this.setState({ isLoading: false }));\n    };\n\n    toggleModal = () => {\n        this.setState(({ showModal }) => ({ showModal: !showModal }));\n        this.setState({ largeImageURL: null });\n    };\n\n    handleModalImage = url => {\n        this.toggleModal();\n        this.setState({ largeImageURL: url });\n    };\n\n    render() {\n        const { showModal, images, error, isLoading, largeImageURL } =\n            this.state;\n        const showButton = images.length > 0;\n\n        return (\n            <>\n                {isLoading && <Spinner />}\n                {error && <h2>{error}</h2>}\n                {error && <p className={css.Error}>{error}</p>}\n                <ul className={css.imageGallery}>\n                    {images.map(({ id, webformatURL, largeImageURL }) => (\n                        <ImageGalleryItem\n                            key={id}\n                            webformatURL={webformatURL}\n                            onToggleModal={this.handleModalImage}\n                            largeImageURL={largeImageURL}\n                        />\n                    ))}\n                </ul>\n\n                {showButton && (\n                    <Button onClick={this.fetchImages} isLoading={isLoading} />\n                )}\n\n                {showModal && (\n                    <Modal onCloseModal={this.toggleModal}>\n                        <img src={largeImageURL} alt=\"\" />\n                    </Modal>\n                )}\n            </>\n        );\n    }\n}\n// ImageGallery.propTypes = {\n//     images: PropTypes.array.isRequired,\n//     onClickImg: PropTypes.func.isRequired,\n// };\n\n//\n\n// {\n//     showButton && !isLoading && <Button onClick={this.getImages} />;\n// }\n// {\n//     showModal && (\n//         <Modal onClose={this.toggleModal}>\n//             <img src={largeImageURL} alt=\"\" />\n//         </Modal>\n//     );\n// }\n\n// const {\n//     images,\n//     isLoading,\n//     showModal,\n//     largeImageURL,\n//     error,\n//     showButton,\n// } = this.state;\n","import React, { Component } from 'react';\n\nimport { Layout } from 'UI/Layout';\nimport { Searchbar } from 'components/Searchbar';\nimport { ImageGallery } from 'components/ImageGallery';\n\nexport default class App extends Component {\n    state = {\n        query: '',\n    };\n\n    handleSubmitSearchbar = query => {\n        this.setState({ query });\n    };\n    render() {\n        const { query } = this.state;\n        return (\n            <Layout>\n                <Searchbar onSubmit={this.handleSubmitSearchbar} />\n                <ImageGallery modalImage={query} />\n            </Layout>\n        );\n    }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { App } from './components';\r\n\r\nimport './index.css';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}